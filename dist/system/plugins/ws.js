"use strict";var __awaiter=this&&this.__awaiter||function(e,a,u,s){return new(u=u||Promise)(function(n,t){function i(e){try{o(s.next(e))}catch(e){t(e)}}function r(e){try{o(s.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof u?t:new u(function(e){e(t)})).then(i,r)}o((s=s.apply(e,a||[])).next())})},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const fastify_plugin_1=__importDefault(require("fastify-plugin"));module.exports=(0,fastify_plugin_1.default)((n,e,i)=>__awaiter(void 0,void 0,void 0,function*(){const e=require("ws").Server;var t={server:n.server,path:"/ws"},t=new e(t);n.decorate("ws",t),n.addHook("onClose",(e,t)=>e.ws.close(t)),i()}));